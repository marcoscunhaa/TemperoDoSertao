import{a as J}from"./chunk-WIUCI3C3.js";import{b as L,d as A,e as R,f as z,g as B,h as j,i as H,l as Q,m as W,n as G,q as Z,s as K}from"./chunk-4DRA6TXY.js";import{e as k,i as F,j as O,k as $}from"./chunk-4XY7KMRM.js";import{$a as v,Ba as q,Ha as y,Ma as V,Na as P,Qa as T,Ra as D,Sa as M,Ta as _,Ua as h,Va as p,W as m,Wa as e,X as c,Xa as t,Ya as b,cb as u,db as f,eb as I,fb as o,gb as S,hb as E,na as r,nb as N,ob as C,qb as x,xa as w}from"./chunk-M4Y7OEIM.js";var X=()=>[O,F],Y=l=>[l],ee=(l,a)=>a.id;function te(l,a){if(l&1){let n=v();e(0,"div",1),o(1),e(2,"button",57),u("click",function(){m(n);let d=f();return c(d.alertaMensagem=null)}),t()()}if(l&2){let n=f();p("ngClass",N(2,Y,"alert-"+n.tipoAlerta)),r(),E(" ",n.alertaMensagem," ")}}function ie(l,a){if(l&1&&(e(0,"option",13),o(1),t()),l&2){let n=a.$implicit,i=f();p("value",n.value)("selected",(i.produtoSelecionado==null?null:i.produtoSelecionado.categoria)===n.value),r(),E(" ",n.label," ")}}function oe(l,a){if(l&1&&(e(0,"option",49),o(1),t()),l&2){let n=a.$implicit;p("value",n.value),r(),S(n.label)}}function ne(l,a){if(l&1){let n=v();e(0,"tr",62),u("click",function(){let d=m(n).$implicit,g=f(2);return c(g.selecionarProduto(d))}),e(1,"td"),o(2),t(),e(3,"td"),o(4),t(),e(5,"td"),o(6),t(),e(7,"td"),o(8),C(9,"number"),t(),e(10,"td"),o(11),C(12,"number"),t(),e(13,"td"),o(14),t(),e(15,"td"),o(16),C(17,"date"),t()()}if(l&2){let n=a.$implicit,i=f(2);I("table-active",(i.produtoSelecionado==null?null:i.produtoSelecionado.id)===n.id),r(2),S(n.categoria),r(2),S(n.detalhe),r(2),S(n.marca),r(2),E("R$ ",x(9,9,n.precoCompra,"1.2-2")),r(3),E("R$ ",x(12,12,n.precoVenda,"1.2-2")),r(3),E("",n.quantidadeEstoque," un"),r(2),S(x(17,15,n.vencimento,"dd/MM/yyyy"))}}function ae(l,a){l&1&&(e(0,"tr")(1,"td",63),o(2,"Nenhum produto encontrado"),t()())}function re(l,a){if(l&1&&(e(0,"table",58)(1,"thead",59)(2,"tr")(3,"th"),o(4,"Categoria"),t(),e(5,"th"),o(6,"Detalhe"),t(),e(7,"th"),o(8,"Marca"),t(),e(9,"th"),o(10,"Valor de aquisi\xE7\xE3o(R$)"),t(),e(11,"th"),o(12,"Valor de Venda(R$)"),t(),e(13,"th"),o(14,"Qtd. Estoque"),t(),e(15,"th"),o(16,"Vencimento"),t()()(),e(17,"tbody",60),_(18,ne,18,18,"tr",61,ee,!1,ae,3,0,"tr"),t()()),l&2){let n=f();r(18),h(n.produtosFiltrados)}}function le(l,a){l&1&&(e(0,"div",64)(1,"div",65),o(2,"Nenhum produto encontrado"),t()())}var U=class l{constructor(a,n){this.produtoService=a;this.notificacaoService=n}produtos=[];produtosFiltrados=[];categoriaSelecionada="todas";termoPesquisa="";produtoSelecionado=null;alertaMensagem=null;tipoAlerta="success";loading=!1;categorias=[{value:"todas",label:"Todas as categorias"},{value:"Carnes",label:"Carnes"},{value:"Temperos",label:"Temperos"},{value:"Bebidas",label:"Bebidas"},{value:"Frios",label:"Frios"},{value:"Doces",label:"Doces"}];ngOnInit(){this.carregarProdutos(),this.notificacaoService.notificacao$.subscribe(a=>{this.alertaMensagem=a.mensagem,this.tipoAlerta=a.tipo,this.carregarProdutos()})}carregarProdutos(){this.loading=!0,this.produtoService.listarTodos().subscribe({next:a=>{this.produtos=a,this.filtrar()},complete:()=>this.loading=!1})}filtrar(){let a=this.termoPesquisa.toLowerCase();this.produtosFiltrados=this.produtos.filter(n=>{let i=this.categoriaSelecionada==="todas"||n.categoria.toLowerCase()===this.categoriaSelecionada.toLowerCase(),d=!a||n.detalhe.toLowerCase().includes(a)||n.marca.toLowerCase().includes(a);return i&&d})}onCategoriaChange(a){this.categoriaSelecionada=a.target.value,this.filtrar()}onPesquisaChange(a){this.termoPesquisa=a.target.value,this.filtrar()}selecionarProduto(a){this.produtoSelecionado=a}confirmarExcluir(){this.produtoSelecionado&&this.produtoService.deletar(this.produtoSelecionado.id).subscribe({next:()=>{this.notificacaoService.emitirSucesso("Produto removido com sucesso!"),this.produtoSelecionado=null,this.carregarProdutos()},error:()=>{this.notificacaoService.emitirErro("Erro ao remover produto")}})}salvarEdicao(){this.produtoSelecionado&&this.produtoService.atualizar(this.produtoSelecionado.id,this.produtoSelecionado).subscribe({next:()=>{this.notificacaoService.emitirSucesso("Produto atualizado com sucesso!"),this.carregarProdutos()},error:()=>{this.notificacaoService.emitirErro("Erro ao atualizar produto")}})}static \u0275fac=function(n){return new(n||l)(w(J),w(K))};static \u0275cmp=q({type:l,selectors:[["app-estoque"]],decls:98,vars:12,consts:[["formEditar","ngForm"],["role","alert",1,"alert","alert-dismissible","text-center","fade","show",3,"ngClass"],["id","modalEditarProduto","tabindex","-1","aria-labelledby","modalEditarProdutoLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow-lg","border-0"],[1,"modal-header","bg-warning","text-white","rounded-top-4"],["id","modalEditarProdutoLabel",1,"modal-title","fw-bold"],[1,"bi","bi-pencil-square","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],[1,"mb-3"],["for","categoriaEditar",1,"form-label","fw-semibold"],["id","categoriaEditar","name","categoria",1,"form-select",3,"ngModelChange","ngModel"],[3,"value","selected"],["for","detalheEditar",1,"form-label","fw-semibold"],["type","text","id","detalheEditar","name","detalhe",1,"form-control",3,"ngModelChange","ngModel"],["for","marcaEditar",1,"form-label","fw-semibold"],["type","text","id","marcaEditar","name","marca",1,"form-control",3,"ngModelChange","ngModel"],["for","precoCompraEditar",1,"form-label","fw-semibold"],["type","number","id","precoCompraEditar","name","precoCompra","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["for","precoVendaEditar",1,"form-label","fw-semibold"],["type","number","id","precoVendaEditar","name","precoVenda","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["for","quantidadeEditar",1,"form-label","fw-semibold"],["type","number","id","quantidadeEditar","name","quantidadeEstoque",1,"form-control",3,"ngModelChange","ngModel"],["for","vencimentoEditar",1,"form-label","fw-semibold"],["type","date","id","vencimentoEditar","name","vencimento",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-toggle","modal","data-bs-target","#modalEditarProduto",1,"btn","btn-warning","text-white",3,"click"],[1,"bi","bi-save","me-1"],["id","confirmDeleteModal","tabindex","-1","aria-labelledby","confirmDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header","bg-danger","text-white","rounded-top-4"],["id","confirmDeleteModalLabel",1,"modal-title","fw-bold"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"modal-body","text-center"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"d-flex","align-items-center","justify-content-center","flex-grow-1"],["src","https://i.ibb.co/tPZ0W5pC/logo.png","alt","logo",2,"height","50px","margin-right","10px"],[1,"m-0","fw-bold"],[1,"d-flex","gap-2"],["data-bs-toggle","modal","data-bs-target","#modalAdicionarProduto",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-1"],["data-bs-toggle","modal","data-bs-target","#modalEditarProduto",1,"btn","btn-warning","text-white",3,"disabled"],[1,"bi","bi-pencil-square","me-1"],["data-bs-toggle","modal","data-bs-target","#confirmDeleteModal",1,"btn","btn-danger",3,"disabled"],[1,"bi","bi-trash","me-1"],[1,"w-25"],[1,"form-select","shadow-sm",3,"change"],[3,"value"],[1,"flex-grow-1","ms-3"],["type","text","placeholder","Pesquisar produto...",1,"form-control","shadow-sm","search-input",3,"input"],[1,"card","shadow-sm","border-0","rounded-3","mb-4"],[1,"card-body","p-0"],[1,"text-end"],["data-bs-toggle","modal","data-bs-target","#modalVenda",1,"btn","btn-success","btn-lg","px-4","shadow-sm","btn-zoom"],[1,"bi","bi-cart-check","me-1"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"table","table-hover","table-borderless","align-middle","mb-0"],[1,"table-secondary","fw-semibold","text-center"],[1,"text-center"],[3,"table-active"],[3,"click"],["colspan","7",1,"text-muted","py-4"],[1,"text-center","py-5"],[1,"mt-2","text-muted","fw-semibold"]],template:function(n,i){if(n&1){let d=v();T(0,te,3,4,"div",1),e(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),b(6,"i",7),o(7,"Editar Produto "),t(),b(8,"button",8),t(),e(9,"div",9)(10,"form",null,0)(12,"div",10)(13,"label",11),o(14,"Categoria"),t(),e(15,"select",12),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.categoria=s))}),_(16,ie,2,3,"option",13,M),t()(),e(18,"div",10)(19,"label",14),o(20,"Detalhe"),t(),e(21,"input",15),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.detalhe=s))}),t()(),e(22,"div",10)(23,"label",16),o(24,"Marca"),t(),e(25,"input",17),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.marca=s))}),t()(),e(26,"div",10)(27,"label",18),o(28,"Valor de aquisi\xE7\xE3o (R$)"),t(),e(29,"input",19),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.precoCompra=s))}),t()(),e(30,"div",10)(31,"label",20),o(32,"Valor de venda (R$)"),t(),e(33,"input",21),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.precoVenda=s))}),t()(),e(34,"div",10)(35,"label",22),o(36,"Quantidade em estoque"),t(),e(37,"input",23),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.quantidadeEstoque=s))}),t()(),e(38,"div",10)(39,"label",24),o(40,"Vencimento"),t(),e(41,"input",25),u("ngModelChange",function(s){return m(d),c(i.produtoSelecionado&&(i.produtoSelecionado.vencimento=s))}),t()()()(),e(42,"div",26)(43,"button",27),o(44,"Cancelar"),t(),e(45,"button",28),u("click",function(){return m(d),c(i.salvarEdicao())}),b(46,"i",29),o(47,"Salvar "),t()()()()(),e(48,"div",30)(49,"div",3)(50,"div",4)(51,"div",31)(52,"h5",32),b(53,"i",33),o(54,"Confirmar exclus\xE3o "),t(),b(55,"button",8),t(),e(56,"div",34),o(57," Tem certeza que deseja excluir "),e(58,"strong"),o(59),t(),o(60,"? "),t(),e(61,"div",26)(62,"button",27),o(63,"N\xE3o"),t(),e(64,"button",35),u("click",function(){return m(d),c(i.confirmarExcluir())}),o(65,"Sim"),t()()()()(),e(66,"div",36)(67,"div",37),b(68,"img",38),e(69,"h2",39),o(70,"TEMPERO DO SERT\xC3O"),t()(),e(71,"div",40)(72,"button",41),b(73,"i",42),o(74," Adicionar "),t(),e(75,"button",43),b(76,"i",44),o(77," Editar "),t(),e(78,"button",45),b(79,"i",46),o(80," Remover "),t()()(),e(81,"div",36)(82,"div",47)(83,"select",48),u("change",function(s){return m(d),c(i.onCategoriaChange(s))}),_(84,oe,2,2,"option",49,M),t()(),e(86,"div",50)(87,"input",51),u("input",function(s){return m(d),c(i.onPesquisaChange(s))}),t()()(),e(88,"div",52)(89,"div",53),y(90,re,21,1)(91,le,3,0),V(92,90,X,null,91),t()(),e(94,"div",54)(95,"button",55),b(96,"i",56),o(97," Vender "),t()()}n&2&&(D(i.alertaMensagem?0:-1),r(15),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.categoria),r(),h(i.categorias),r(5),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.detalhe),r(4),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.marca),r(4),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.precoCompra),r(4),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.precoVenda),r(4),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.quantidadeEstoque),r(4),p("ngModel",i.produtoSelecionado==null?null:i.produtoSelecionado.vencimento),r(18),S(i.produtoSelecionado==null?null:i.produtoSelecionado.detalhe),r(16),p("disabled",!i.produtoSelecionado),r(3),p("disabled",!i.produtoSelecionado),r(6),h(i.categorias),r(8),P(i.produtosFiltrados.length>0))},dependencies:[$,k,Z,j,W,G,L,H,Q,A,R,B,z],styles:[".btn-zoom[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.btn-zoom[_ngcontent-%COMP%]:hover{transform:scale(1.12);box-shadow:0 0 14px #00000040}"]})};export{U as Estoque};
