import './polyfills.server.mjs';
import{a as ee}from"./chunk-E6KCAA3J.mjs";import{b as j,d as H,e as G,f as Q,g as U,h as W,i as Z,l as J,m as K,n as X,q as Y,s as te}from"./chunk-SNGQOYWO.mjs";import{g as D,h as B,i as $,k as L,l as z,m as R}from"./chunk-B6MVDOO4.mjs";import{$a as o,Ab as N,Da as q,Ia as y,Ta as V,U as u,Ua as T,V as m,Va as M,Xa as v,Ya as S,Za as s,_a as i,ab as b,db as h,gb as p,hb as _,ib as k,jb as E,kb as a,lb as x,mb as f,pa as l,tb as F,ub as O,vb as I,wb as A,xb as C,za as P,zb as w}from"./chunk-I3HLABJ2.mjs";import"./chunk-X2SEQXRR.mjs";var oe=r=>[r],ne=(r,n,t,e,d)=>({"bg-red-light text-red border-red":r,"bg-yellow-light text-yellow border-yellow":n,"bg-green-light text-green border-green":t,"bg-blue-light text-blue border-blue":e,"bg-purple-light text-purple border-purple":d}),ae=(r,n,t)=>({"bg-danger-subtle text-danger":r,"bg-warning-subtle text-warning":n,"bg-success-subtle text-success":t}),re=(r,n)=>({"bg-primary text-white":r,"text-primary":n}),le=(r,n)=>n.id;function de(r,n){if(r&1){let t=h();i(0,"div",2),a(1),i(2,"button",67),p("click",function(){u(t);let d=_();return m(d.alertaMensagem=null)}),o()()}if(r&2){let t=_();s("ngClass",F(2,oe,"alert-"+t.tipoAlerta)),l(),f(" ",t.alertaMensagem," ")}}function se(r,n){if(r&1&&(i(0,"option",14),a(1),o()),r&2){let t=n.$implicit,e=_();s("value",t.value)("selected",(e.produtoSelecionado==null?null:e.produtoSelecionado.categoria)===t.value),l(),f(" ",t.label," ")}}function ce(r,n){if(r&1&&(i(0,"option",50),a(1),o()),r&2){let t=n.$implicit;s("value",t.value),l(),x(t.label)}}function ue(r,n){if(r&1){let t=h();i(0,"tr",75),p("click",function(){let d=u(t).$implicit,g=_(2);return m(g.selecionarProduto(d))}),i(1,"td",76)(2,"span",77),a(3),o()(),i(4,"td",78),a(5),i(6,"div",79),a(7),o()(),i(8,"td",80),a(9),C(10,"number"),o(),i(11,"td",81),a(12),C(13,"number"),o(),i(14,"td",72)(15,"span",82),a(16),o()(),i(17,"td",83),a(18),C(19,"date"),o()()}if(r&2){let t=n.$implicit,e=_(2);E("table-active",(e.produtoSelecionado==null?null:e.produtoSelecionado.id)===t.id),l(2),s("ngClass",A(20,ne,t.categoria==="Carnes",t.categoria==="Bebidas",t.categoria==="Doces",t.categoria==="Frios",t.categoria==="Temperos")),l(),f(" ",t.categoria," "),l(2),f(" ",t.detalhe," "),l(2),x(t.marca),l(2),f(" R$ ",w(10,11,t.precoCompra,"1.2-2")," "),l(3),f(" R$ ",w(13,14,t.precoVenda,"1.2-2")," "),l(3),s("ngClass",I(26,ae,t.quantidadeEstoque<5,t.quantidadeEstoque>=5&&t.quantidadeEstoque<=10,t.quantidadeEstoque>10)),l(),f(" ",t.quantidadeEstoque," un "),l(2),f(" ",w(19,17,t.vencimento,"dd/MM/yyyy")," ")}}function me(r,n){r&1&&(i(0,"tr")(1,"td",84),a(2," Nenhum produto encontrado "),o()())}function pe(r,n){if(r&1&&(i(0,"div")(1,"div",68)(2,"table",69)(3,"thead",70)(4,"tr",71)(5,"th",72),a(6,"Categoria"),o(),i(7,"th",72),a(8,"Descri\xE7\xE3o do Produto"),o(),i(9,"th",72),a(10,"Aquisi\xE7\xE3o"),o(),i(11,"th",72),a(12,"Venda"),o(),i(13,"th",72),a(14,"Estoque"),o(),i(15,"th",72),a(16,"Vencimento"),o()()(),i(17,"tbody",73),v(18,ue,20,30,"tr",74,le,!1,me,3,0,"tr"),o()()()()),r&2){let t=_();l(18),S(t.produtosNaPagina())}}function ge(r,n){r&1&&(i(0,"div",85),a(1," Nenhum produto encontrado "),o())}function be(r,n){if(r&1){let t=h();i(0,"li",58)(1,"button",86),p("click",function(){let d=u(t).$implicit,g=_();return m(g.irParaPagina(d))}),a(2),o()()}if(r&2){let t=n.$implicit,e=_();E("active",e.paginaAtual===t),l(),s("ngClass",O(4,re,e.paginaAtual===t,e.paginaAtual!==t)),l(),f(" ",t," ")}}var ie=class r{constructor(n,t){this.produtoService=n;this.notificacaoService=t}produtos=[];produtosFiltrados=[];categoriaSelecionada="todas";termoPesquisa="";produtoSelecionado=null;alertaMensagem=null;tipoAlerta="success";loading=!1;paginaAtual=1;totalPaginas=1;paginas=[];itensPorPagina=5;categorias=[{value:"todas",label:"Todas as categorias"},{value:"Carnes",label:"Carnes"},{value:"Temperos",label:"Temperos"},{value:"Bebidas",label:"Bebidas"},{value:"Frios",label:"Frios"},{value:"Doces",label:"Doces"}];ngOnInit(){this.carregarProdutos(),this.notificacaoService.notificacao$.subscribe(n=>{this.alertaMensagem=n.mensagem,this.tipoAlerta=n.tipo,this.carregarProdutos()})}carregarProdutos(){this.loading=!0,this.produtoService.listarTodos().subscribe({next:n=>{this.produtos=n,this.filtrar()},complete:()=>this.loading=!1})}filtrar(){let n=this.termoPesquisa.toLowerCase();this.produtosFiltrados=this.produtos.filter(t=>{let e=this.categoriaSelecionada==="todas"||t.categoria.toLowerCase()===this.categoriaSelecionada.toLowerCase(),d=!n||t.detalhe.toLowerCase().includes(n)||t.marca.toLowerCase().includes(n);return e&&d}),this.atualizarPaginacao()}onCategoriaChange(n){this.categoriaSelecionada=n.target.value,this.filtrar()}onPesquisaChange(n){this.termoPesquisa=n.target.value,this.filtrar()}selecionarProduto(n){this.produtoSelecionado=n}confirmarExcluir(){this.produtoSelecionado&&this.produtoService.deletar(this.produtoSelecionado.id).subscribe({next:()=>{this.notificacaoService.emitirSucesso("Produto removido com sucesso!"),this.produtoSelecionado=null,this.carregarProdutos()},error:()=>{this.notificacaoService.emitirErro("Erro ao remover produto")}})}salvarEdicao(){this.produtoSelecionado&&this.produtoService.atualizar(this.produtoSelecionado.id,this.produtoSelecionado).subscribe({next:()=>{this.notificacaoService.emitirSucesso("Produto atualizado com sucesso!"),this.carregarProdutos()},error:n=>{n.status===409?this.notificacaoService.emitirErro(n.error):this.notificacaoService.emitirErro("Erro ao atualizar produto")}})}atualizarPaginacao(){this.totalPaginas=Math.ceil(this.produtosFiltrados.length/this.itensPorPagina),this.paginas=Array.from({length:this.totalPaginas},(n,t)=>t+1),this.paginaAtual>this.totalPaginas&&(this.paginaAtual=this.totalPaginas),this.paginaAtual<1&&(this.paginaAtual=1)}irParaPagina(n){n<1||n>this.totalPaginas||(this.paginaAtual=n)}produtosNaPagina(){let n=(this.paginaAtual-1)*this.itensPorPagina;return this.produtosFiltrados.slice(n,n+this.itensPorPagina)}trackByIndex(n){return n}static \u0275fac=function(t){return new(t||r)(P(ee),P(te))};static \u0275cmp=q({type:r,selectors:[["app-estoque"]],decls:106,vars:19,consts:[["formEditar","ngForm"],["semProdutos",""],["role","alert",1,"alert","alert-dismissible","text-center","fade","show",3,"ngClass"],["id","modalEditarProduto","tabindex","-1","aria-labelledby","modalEditarProdutoLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content","rounded-4","shadow-lg","border-0"],[1,"modal-header","bg-warning","text-white","rounded-top-4"],["id","modalEditarProdutoLabel",1,"modal-title","fw-bold"],[1,"bi","bi-pencil-square","me-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white"],[1,"modal-body"],[1,"mb-3"],["for","categoriaEditar",1,"form-label","fw-semibold"],["id","categoriaEditar","name","categoria",1,"form-select",3,"ngModelChange","ngModel"],[3,"value","selected"],["for","detalheEditar",1,"form-label","fw-semibold"],["type","text","id","detalheEditar","name","detalhe",1,"form-control",3,"ngModelChange","ngModel"],["for","marcaEditar",1,"form-label","fw-semibold"],["type","text","id","marcaEditar","name","marca",1,"form-control",3,"ngModelChange","ngModel"],["for","precoCompraEditar",1,"form-label","fw-semibold"],["type","number","id","precoCompraEditar","name","precoCompra","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["for","precoVendaEditar",1,"form-label","fw-semibold"],["type","number","id","precoVendaEditar","name","precoVenda","step","0.01",1,"form-control",3,"ngModelChange","ngModel"],["for","quantidadeEditar",1,"form-label","fw-semibold"],["type","number","id","quantidadeEditar","name","quantidadeEstoque",1,"form-control",3,"ngModelChange","ngModel"],["for","vencimentoEditar",1,"form-label","fw-semibold"],["type","date","id","vencimentoEditar","name","vencimento",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-toggle","modal","data-bs-target","#modalEditarProduto",1,"btn","btn-warning","text-white",3,"click"],[1,"bi","bi-save","me-1"],["id","confirmDeleteModal","tabindex","-1","aria-labelledby","confirmDeleteModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header","bg-danger","text-white","rounded-top-4"],["id","confirmDeleteModalLabel",1,"modal-title","fw-bold"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"modal-body","text-center"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"d-flex","align-items-center","justify-content-center","flex-grow-1"],["src","https://i.ibb.co/tPZ0W5pC/logo.png","alt","logo",2,"height","50px","margin-right","10px"],[1,"m-0","fw-bold"],[1,"d-flex","gap-2"],["data-bs-toggle","modal","data-bs-target","#modalAdicionarProduto",1,"btn","btn-primary"],[1,"bi","bi-plus-circle","me-1"],["data-bs-toggle","modal","data-bs-target","#modalEditarProduto",1,"btn","btn-warning","text-white",3,"disabled"],[1,"bi","bi-pencil-square","me-1"],["data-bs-toggle","modal","data-bs-target","#confirmDeleteModal",1,"btn","btn-danger",3,"disabled"],[1,"bi","bi-trash","me-1"],[1,"w-25"],[1,"form-select","shadow-sm",3,"change"],[3,"value"],[1,"flex-grow-1","ms-3"],["type","text","placeholder","Pesquisar produto...",1,"form-control","shadow-sm","search-input",3,"input"],[1,"card","shadow-sm","border-0","rounded-4","mb-4"],[1,"card-body","p-0"],[4,"ngIf","ngIfElse"],["aria-label","Navega\xE7\xE3o da Tabela",1,"mb-4"],[1,"pagination","justify-content-center","mb-0","gap-1"],[1,"page-item"],["aria-label","Anterior",1,"page-link","rounded-circle","px-3","py-2",3,"click"],[1,"bi","bi-chevron-left"],["class","page-item",3,"active",4,"ngFor","ngForOf","ngForTrackBy"],["aria-label","Pr\xF3ximo",1,"page-link","rounded-circle","px-3","py-2",3,"click"],[1,"bi","bi-chevron-right"],[1,"text-end"],["data-bs-toggle","modal","data-bs-target","#modalVenda",1,"btn","btn-success","btn-lg","px-4","shadow-sm","btn-zoom"],[1,"bi","bi-cart-check","me-1"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"table-responsive","shadow-sm"],[1,"table","shadow-sm","table-hover","align-middle","mb-0"],[1,"bg-primary","text-white","shadow-sm"],[1,"fw-semibold","text-white","small"],[1,"py-3","px-4"],[1,"table-group-divider"],[1,"cursor-pointer",3,"table-active"],[1,"cursor-pointer",3,"click"],[1,"py-3","px-4","fw-bold","text-dark"],[1,"badge","border","px-3","py-2",3,"ngClass"],[1,"py-3","px-4","fw-semibold","text-dark"],[1,"small","text-muted","mt-1"],[1,"py-3","px-4","fw-semibold","text-danger"],[1,"py-3","px-4","fw-semibold","text-success"],[1,"badge","rounded-pill","px-3","py-2",3,"ngClass"],[1,"py-3","px-4","text-muted"],["colspan","7",1,"text-center","py-5","text-muted","fs-6"],[1,"text-center","py-5","text-muted","fw-semibold"],[1,"page-link","rounded-circle","px-3","py-2",3,"click","ngClass"]],template:function(t,e){if(t&1){let d=h();V(0,de,3,4,"div",2),i(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h5",7),b(6,"i",8),a(7,"Editar Produto "),o(),b(8,"button",9),o(),i(9,"div",10)(10,"form",null,0)(12,"div",11)(13,"label",12),a(14,"Categoria"),o(),i(15,"select",13),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.categoria=c))}),v(16,se,2,3,"option",14,M),o()(),i(18,"div",11)(19,"label",15),a(20,"Detalhe"),o(),i(21,"input",16),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.detalhe=c))}),o()(),i(22,"div",11)(23,"label",17),a(24,"Marca"),o(),i(25,"input",18),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.marca=c))}),o()(),i(26,"div",11)(27,"label",19),a(28,"Valor de aquisi\xE7\xE3o (R$)"),o(),i(29,"input",20),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.precoCompra=c))}),o()(),i(30,"div",11)(31,"label",21),a(32,"Valor de venda (R$)"),o(),i(33,"input",22),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.precoVenda=c))}),o()(),i(34,"div",11)(35,"label",23),a(36,"Quantidade em estoque"),o(),i(37,"input",24),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.quantidadeEstoque=c))}),o()(),i(38,"div",11)(39,"label",25),a(40,"Vencimento"),o(),i(41,"input",26),p("ngModelChange",function(c){return u(d),m(e.produtoSelecionado&&(e.produtoSelecionado.vencimento=c))}),o()()()(),i(42,"div",27)(43,"button",28),a(44,"Cancelar"),o(),i(45,"button",29),p("click",function(){return u(d),m(e.salvarEdicao())}),b(46,"i",30),a(47,"Salvar "),o()()()()(),i(48,"div",31)(49,"div",4)(50,"div",5)(51,"div",32)(52,"h5",33),b(53,"i",34),a(54,"Confirmar exclus\xE3o "),o(),b(55,"button",9),o(),i(56,"div",35),a(57," Tem certeza que deseja excluir "),i(58,"strong"),a(59),o(),a(60,"? "),o(),i(61,"div",27)(62,"button",28),a(63,"N\xE3o"),o(),i(64,"button",36),p("click",function(){return u(d),m(e.confirmarExcluir())}),a(65,"Sim"),o()()()()(),i(66,"div",37)(67,"div",38),b(68,"img",39),i(69,"h2",40),a(70,"TEMPERO DO SERT\xC3O"),o()(),i(71,"div",41)(72,"button",42),b(73,"i",43),a(74," Adicionar "),o(),i(75,"button",44),b(76,"i",45),a(77," Editar "),o(),i(78,"button",46),b(79,"i",47),a(80," Remover "),o()()(),i(81,"div",37)(82,"div",48)(83,"select",49),p("change",function(c){return u(d),m(e.onCategoriaChange(c))}),v(84,ce,2,2,"option",50,M),o()(),i(86,"div",51)(87,"input",52),p("input",function(c){return u(d),m(e.onPesquisaChange(c))}),o()()(),i(88,"div",53)(89,"div",54),y(90,pe,21,1,"div",55)(91,ge,2,0,"ng-template",null,1,N),o()(),i(93,"nav",56)(94,"ul",57)(95,"li",58)(96,"button",59),p("click",function(){return u(d),m(e.irParaPagina(e.paginaAtual-1))}),b(97,"i",60),o()(),y(98,be,3,7,"li",61),i(99,"li",58)(100,"button",62),p("click",function(){return u(d),m(e.irParaPagina(e.paginaAtual+1))}),b(101,"i",63),o()()()(),i(102,"div",64)(103,"button",65),b(104,"i",66),a(105," Vender "),o()()}if(t&2){let d=k(92);T(e.alertaMensagem?0:-1),l(15),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.categoria),l(),S(e.categorias),l(5),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.detalhe),l(4),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.marca),l(4),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.precoCompra),l(4),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.precoVenda),l(4),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.quantidadeEstoque),l(4),s("ngModel",e.produtoSelecionado==null?null:e.produtoSelecionado.vencimento),l(18),x(e.produtoSelecionado==null?null:e.produtoSelecionado.detalhe),l(16),s("disabled",!e.produtoSelecionado),l(3),s("disabled",!e.produtoSelecionado),l(6),S(e.categorias),l(6),s("ngIf",e.produtosFiltrados.length>0)("ngIfElse",d),l(5),E("disabled",e.paginaAtual===1),l(3),s("ngForOf",e.paginas)("ngForTrackBy",e.trackByIndex),l(),E("disabled",e.paginaAtual===e.totalPaginas)}},dependencies:[R,D,B,$,Y,W,K,X,j,Z,J,H,G,U,Q,z,L],styles:['@charset "UTF-8";.btn-zoom[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.btn-zoom[_ngcontent-%COMP%]:hover{transform:scale(1.12);box-shadow:0 0 14px #00000040}.text-purple[_ngcontent-%COMP%]{color:#6f42c1!important}.bg-purple-light[_ngcontent-%COMP%]{background-color:#f3e8ff!important;border-color:#d3b8ff!important}.text-blue[_ngcontent-%COMP%]{color:#0d6efd!important}.bg-blue-light[_ngcontent-%COMP%]{background-color:#e6f0ff!important;border-color:#b3d1ff!important}.text-green[_ngcontent-%COMP%]{color:#198754!important}.bg-green-light[_ngcontent-%COMP%]{background-color:#e8fff1!important;border-color:#b8f2d0!important}.text-red[_ngcontent-%COMP%]{color:#dc3545!important}.bg-red-light[_ngcontent-%COMP%]{background-color:#ffe8ea!important;border-color:#ffb5bd!important}.text-yellow[_ngcontent-%COMP%]{color:#ffc107!important}.bg-yellow-light[_ngcontent-%COMP%]{background-color:#fff8e1!important;border-color:#ffe9a8!important}.text-gray[_ngcontent-%COMP%]{color:#6c757d!important}.bg-gray-light[_ngcontent-%COMP%]{background-color:#f1f3f5!important;border-color:#d6d9dc!important}.text-orange[_ngcontent-%COMP%]{color:#fd7e14!important}.bg-orange-light[_ngcontent-%COMP%]{background-color:#fff1e6!important;border-color:#ffcfb3!important}']})};export{ie as Estoque};
